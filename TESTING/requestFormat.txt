#---------------#
# BASH          #
#---------------#
# Login and save token
TOKEN=$(curl -X POST http://localhost:8080/login -H "Content-Type: application/json" -d '{"username": "testuser", "password": "password"}' | jq -r '.token')

# Use token for subsequent requests
curl -X GET http://localhost:8080/functions -H "Authorization: Bearer $TOKEN"

#---------------#
# POWERSHELL    #
#---------------#
# Login and save token
$response = Invoke-RestMethod -Method POST -Uri "http://localhost:8080/login" -Headers @{ "Content-Type" = "application/json" } -Body '{"username":"testuser","password":"password"}'
$TOKEN = ($response.Content | ConvertFrom-Json).token

# Use token for subsequent requests
curl -Method GET -Uri "http://localhost:8080/functions" -Headers @{ "Authorization" = "Bearer $TOKEN" }

#---------------#
# CMD           #
#---------------#
# Login and save token
FOR /F "tokens=*" %i IN ('curl -X POST http://localhost:8080/login -H "Content-Type: application/json" -d "{\"username\":\"testuser\",\"password\":\"password\"}" ^| jq -r ".token"') DO SET TOKEN=%i

# Login and save token
curl -X GET http://localhost:8080/functions -H "Authorization: Bearer %TOKEN%"